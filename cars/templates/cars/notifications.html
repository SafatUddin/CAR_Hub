{% extends 'cars/base.html' %}

{% block content %}
<div class="card" style="max-width: 900px; margin: 0 auto;">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
        <h2 style="margin:0;">Notifications</h2>
        {% if unread_count > 0 %}
        <form action="{% url 'mark_all_read' %}" method="post" style="margin:0;">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary">
                <i class="fa-solid fa-check-double"></i> Mark All as Read
            </button>
        </form>
        {% endif %}
    </div>

    <div style="display:flex; flex-direction:column; gap:1rem;">
        {% for notif in notifications %}
        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:start;">
                <div style="flex:1;">
                    <p style="margin:0;">{{ notif.message }}</p>
                    <small style="color:#94a3b8;">{{ notif.created_at|timesince }} ago</small>
                </div>
                {% if not notif.is_read %}
                <span
                    style="background:#3b82f6; color:white; padding:0.25rem 0.5rem; border-radius:0.25rem; font-size:0.75rem; font-weight:600;">
                    NEW
                </span>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <p style="text-align:center; color:#94a3b8; padding:2rem;">No notifications.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}