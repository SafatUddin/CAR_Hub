<!DOCTYPE html>
{% extends 'cars/base.html' %}

{% block content %}
<div class="card" style="max-width: 900px; margin: 0 auto;">
    <!-- Seller Info Header -->
    <div style="display: flex; align-items: center; gap: 1.5rem; padding: 2rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; margin-bottom: 2rem;">
        <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 2rem;">
            {{ seller.first_name.0|upper }}
        </div>
        <div style="flex: 1;">
            <h2 style="margin: 0 0 0.5rem 0;">{{ seller.first_name }}</h2>
            <p style="margin: 0; color: #94a3b8; font-size: 1rem;">@{{ seller.username }}</p>
            <p style="margin: 0.5rem 0 0 0; color: #94a3b8; font-size: 0.9rem;">
                <i class="fa-solid fa-calendar"></i> Member since {{ seller.date_joined|date:"F Y" }}
            </p>
        </div>
    </div>

    <!-- Statistics -->
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 2rem;">
        <div style="padding: 1.5rem; background: rgba(59, 130, 246, 0.1); border-radius: 0.5rem; text-align: center; border: 1px solid #3b82f6;">
            <p style="margin: 0; font-size: 2rem; font-weight: 700; color: #3b82f6;">{{ total_listings }}</p>
            <p style="margin: 0.5rem 0 0 0; color: #94a3b8; font-size: 0.9rem;">Total Listings</p>
        </div>
        <div style="padding: 1.5rem; background: rgba(16, 185, 129, 0.1); border-radius: 0.5rem; text-align: center; border: 1px solid #10b981;">
            <p style="margin: 0; font-size: 2rem; font-weight: 700; color: #10b981;">{{ available_count }}</p>
            <p style="margin: 0.5rem 0 0 0; color: #94a3b8; font-size: 0.9rem;">Available</p>
        </div>
        <div style="padding: 1.5rem; background: rgba(245, 158, 11, 0.1); border-radius: 0.5rem; text-align: center; border: 1px solid #f59e0b;">
            <p style="margin: 0; font-size: 2rem; font-weight: 700; color: #f59e0b;">{{ sold_count }}</p>
            <p style="margin: 0.5rem 0 0 0; color: #94a3b8; font-size: 0.9rem;">Sold</p>
        </div>
    </div>

    <!-- Contact Info (if available and not viewing own profile) -->
    {% if user != seller and user.is_authenticated %}
    <div style="padding: 1.5rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; margin-bottom: 2rem; border: 1px solid var(--glass-border);">
        <h3 style="margin: 0 0 1rem 0; font-size: 1.2rem;">Contact Seller</h3>
        <div style="display: flex; gap: 1rem;">
            <a href="mailto:{{ seller.email }}" class="btn" style="flex: 1; background: white; color: black; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                <i class="fa-solid fa-envelope"></i> Email
            </a>
            {% if seller.profile.whatsapp_number %}
            <a href="https://wa.me/{{ seller.profile.whatsapp_number }}" target="_blank" class="btn" style="flex: 1; background: white; color: black; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                <i class="fa-brands fa-whatsapp"></i> WhatsApp
            </a>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Seller's Listings -->
    <div>
        <h3 style="margin-bottom: 1rem;">{{ seller.first_name }}'s Listings</h3>
        {% if seller_cars %}
        <div class="grid">
            {% for car in seller_cars %}
            <div class="card">
                <div style="position: relative;">
                    {% if car.images.first %}
                    <img src="{{ car.images.first.image.url }}" alt="{{ car.make }} {{ car.model }}"
                        style="width:100%; height:150px; object-fit:cover; border-radius:0.5rem; margin-bottom:1rem;">
                    {% endif %}
                    {% if car.status == 'sold' %}
                    <div style="position: absolute; top: 20px; right: -35px; background: #ef4444; color: white; padding: 0.5rem 3rem; font-weight: 700; font-size: 0.9rem; transform: rotate(45deg); box-shadow: 0 4px 8px rgba(0,0,0,0.3); text-transform: uppercase; letter-spacing: 1px;">
                        SOLD
                    </div>
                    {% endif %}
                </div>
                <h4>{{ car.year }} {{ car.make }} {{ car.model }}</h4>
                <p style="color: var(--primary-color); font-size: 1.2rem; font-weight: 600;">à§³{{ car.price|floatformat:0 }}</p>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid var(--glass-border);">
                    <span style="font-size: 0.85rem; color: #94a3b8;">
                        {% if car.status == 'sold' %}
                        <i class="fa-solid fa-circle" style="color: #ef4444; font-size: 0.5rem;"></i> Sold
                        {% else %}
                        <i class="fa-solid fa-circle" style="color: #10b981; font-size: 0.5rem;"></i> Available
                        {% endif %}
                    </span>
                    <a href="{% url 'car_detail' car.id %}" class="btn btn-primary" style="font-size: 0.85rem; padding: 0.4rem 0.8rem;">View Details</a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p style="text-align: center; color: #94a3b8; padding: 2rem;">This seller has no listings yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
